# 1 ~ n整数中1出现的次数

## 题目描述

输入一个整数$n$，求$1 \sim n$这$n$个整数的十进制表示中$1$出现的次数。

例如，输入$12$，$1 \sim 12$这些整数中包含$1$的数字有$1$、$10$、$11$和$12$，$1$一共出现了$5$次。

### 示例1

**输入**
```
n = 12
```

**输出**
```
5
```

### 示例2

**输入**
```
n = 13
```

**输出**
```
6
```

**备注**
- $1 \leq n \leq 2^{31}$

## 解释说明

首先明确一点，我们的算法是给定$n$，我们将$1 \sim n$的所有数的个位出现$1$的次数 + $1 \sim n$的所有数的十位出现$1$的次数 + $1 \sim n$的所有数的百位出现$1$的次数 + $\cdots$，就是最终的答案。我们通过找规律的方法，只需要知道$n$，就能算出$1 \sim n$的每一位上一共能出现多少个$1$。请看下面的步骤：

1. 我们首先来思考$n$的某一位可能是哪些数字，因为这会影响到我们找规律的公式。不难想到，$n$的某一位要么是$0$，要么是$1$，要么是 $2/3/4/ \cdots /9$。
2. 我们现在以十位为例子来推导我们的公式。我们设立一个变量```digit```，用来表示当前的数位（```digit```等于几当前的数位就是几位数）。所以如果是十位，$digit = 10$。
   - 假设$n = 1204$。此时十位是$0$，我们把十位左边的叫做高位```high```，所以这里$high = 12$；把十位右边的叫做低位```low```，所以这里$low = 4$。十位能出现$1$ 的数字范围是：$0010 \sim 1119$，如果我们把十位遮住（也就是锁定十位，就可以不看它了），那就会变成：$000 \sim 119$，这里一共有：$119 - 000 + 1 = 120$ 个数。是不是刚好等于$high * 10$也就是$high * digit$？那我们就找到了当某一位等于$0$的时候，这一位一共可以出现的数字个数就是：$high * digit$。
   - 假设$n = 1214$。此时十位是$1$，同样我们有$high = 12，low = 4$。十位能出现$1$的数字范围是：$0010 \sim 1214$，如果我们把十位遮住，那就会变成：$000 \sim 124$，这里一共有：$124 - 000 + 1 = 125$个数。刚好等于$12 * 10 + 4 + 1$也就是$high * digit + low + 1$。那我们就找到了当某一位等于$1$的时候，这一位一共可以出现的数字个数就是：$high * digit + low + 1$。
   - 假设$n = 1234$。此时十位是$3$，同样我们有$high = 12，low = 4$。十位能出现$1$的数字范围是：$0010 \sim 1219$，如果我们把十位遮住，那就会变成：$000 \sim 129$，这里一共有：$129 - 000 + 1 = 130$个数。刚好等于$(12 + 1) * 10$也就是$(high + 1) * digit$。那我们就找到了当某一位等于$2/3/4/.../9$的时候，这一位一共可以出现的数字个数就是：$(high + 1) * digit$。

```C++
class Solution {
public:
    int countDigitOne(int n) {
        int ans = 0;
        int high = n / 10, low = 0, cur = n % 10;
        long digit = 1;
        while (high != 0 || cur != 0){
            if (cur == 0){
                ans += high * digit;
            }else if (cur == 1){
                ans += high * digit + low + 1;
            }else{
                ans += (high + 1) * digit;
            }
            low += cur * digit;
            digit *= 10;
            cur = high % 10;
            high /= 10;
        }
        return ans;
    }
};
```